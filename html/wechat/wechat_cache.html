<!DOCTYPE html>
<html>
   <head>
      <meta charset='utf-8'>
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
      <meta name="description" content="微信浏览器缓存">
      <meta name="keywords" content="吴杨杨,个人博客,微信浏览器缓存,tgwuyangyang.github.io">
      <LINK href="../../images/wu.ico" type="img/x-icon" rel=icon>
      <link rel="stylesheet" type="text/css" href="../../css/stylesheet.css" media="screen">
      <link rel="stylesheet" type="text/css" href="../../css/html/content.css">
      <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
      <title>吴杨杨的个人博客</title>
   </head>

   <body>
      <div id="container">
         <div class="inner">
            <header>
               <h1>Tgwuyangyang.GitHub.com</h1>
               <h2></h2>
            </header>
            <hr>
            <p class="title"><span>解决微信浏览器缓存页面问题</span></p>
            <hr>
            <section id="main_content">
               <p class="author">
                  <span>作者：吴杨杨</span>
                  <a class="back" href="../../index.html">返回首页</a>
               </p>
               <p class="time"><span>时间：2016-11-28</span></p>
               <p>最近，一直在做微信企业号的开发，遇到的问题数不胜数，尤其以其中的缓存问题最棘手。</p>
               <p>查找了一些资料，总结一下有以下几种解决办法：</p>
               <p>a) 在页面头部加上如下的内容</p>
               <pre><code>&lt;meta http-equiv=&quot;cache-control&quot; content=&quot;max-age=0&quot; /&gt;
&lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot; /&gt;
&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot; /&gt;
&lt;meta http-equiv=&quot;expires&quot; content=&quot;Tue, 01 Jan 1980 1:00:00 GMT&quot; /&gt;
&lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot; /&gt;
               </code></pre>
               <p>b) url后加随机数</p>
               <pre><code>URL 参数后加上 "?ran=" + Math.random();
               </code></pre>
               <p>c) 用随机时间，和随机数一样</p>
               <pre><code>在URL 参数后加上 "?timestamp=" + new Date().getTime(); 
               </code></pre>
               <p>d) 在css文件和js文件后加版本号</p>
               <pre><code>eg: test.1.1.css
               </code></pre>
               <p>上述方法ios基本没什么问题，但是android用的是x5内核的浏览器，对于这个顽固分子不起作用。</p>
               <p>只能让用户退出重新登录，有时候退出重新登录也不起作用，只好使用以下方法</p>
               <p> 安卓用户在任意聊天窗口发送： http://debugx5.qq.com 打开这个网址，找到清理缓存，点击确定即可。</p>
               <img src="../../images/wechat-x5-clear.jpg"/>
               <p>这种方法确实能解决问题，但是不是长久之计。使用如下方法：</p>
               <p>在html标签中增加不存在的manifest文件链接：</p>
               <pre><code>&lt;html manifest=&quot;IGNORE.manifest&quot;&gt;
               </code></pre>
               <p>HTML5 W3C规范<a href="https://www.w3.org/TR/html5/browsers.html">https://www.w3.org/TR/html5/browsers.html</a>，解析器下载manifest header 404/410时，缓存会失效。</p>
               <p>以上。</p>
               <hr>
               <section id="downloads" class="clearfix">
               <a href="../../index.html">返回首页</a>
               <a style="float:right;" href="https://github.com/tgwuyangyang" id="view-on-github" class="button">
                  <span>View on GitHub</span>
               </a>
            </section>
            </section>
            <hr>
            <div id="comment"></div>
            <footer>
               <table class="border-none">
                  <tr>
                     <td class="border-none">
                        This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
                     </td>
                  </tr>
               </table>
            </footer>
         </div>
      </div>
      <script src="../../js/jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
      <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
      <script type="text/javascript">
         var gitment = new Gitment({
            owner: 'tgwuyangyang',
            repo: 'tgwuyangyang.github.com',
            oauth: {
               client_id: 'bdb7790eaaefb0d99fd1',
               client_secret: '228515d621788885f5e1f0fdae20a0da82bcfd9e',
            }
         })
   
         gitment.render("comment");
      </script>
   </body>
</html>
