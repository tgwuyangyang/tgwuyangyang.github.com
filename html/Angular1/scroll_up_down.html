<!DOCTYPE html>
<html>
   <head>
      <meta charset='utf-8'>
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
      <meta name="description" content="directive">
      <meta name="keywords" content="吴杨杨,个人博客,angular1,tgwuyangyang.github.io,屏幕向上滑动，顶部菜单隐藏，屏幕向下滑动，顶部菜单显示">
      <LINK href="../../images/wu.ico" type="img/x-icon" rel=icon>
      <link rel="stylesheet" type="text/css" href="../../css/stylesheet.css" media="screen">
      <link rel="stylesheet" type="text/css" href="../../css/html/content.css">
      <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
      <title>吴杨杨的个人博客</title>
   </head>

   <body>
      <div id="container">
         <div class="inner">
            <header>
               <h1>Tgwuyangyang.GitHub.com</h1>
            </header>
            <hr>
            <p class="title"><span>屏幕向上滑动，顶部菜单隐藏，屏幕向下滑动，顶部菜单显示</span></p>
            <hr>
            <section id="main_content">
               <p class="author">
                  <span>作者：吴杨杨</span>
                  <a class="back" href="../../index.html">返回首页</a>
               </p>
               <p class="time"><span>时间：2017-02-23</span></p>
               <p>有两种方式可以实现，一种是监听滚动条，还有一种是监听手指在屏幕滑动的距离</p>
               <p>1.监听滚动条</p>
               <pre><code>angular.module('artiteckApp')
   .directive('scrollUpDown', function() {
      return {
         restrict: 'A',
         scope: false,
         link: function(scope, elem, attrs) {

            var scrollTop = elem.scrollTop();
            var height = elem.find('.title').outerHeight();

            elem.on('scroll', function() {
               var changeScrollTop = elem.scrollTop();

               if(changeScrollTop &gt; height) {
                  elem.find('.title').addClass('title-hide');
               } else {
                  elem.find('.title').removeClass('title-show');
               }

               if(changeScrollTop &gt; scrollTop) {
                  elem.find('.title').removeClass('title-hide');
               } else {
                  elem.find('.title').addClass('title-show');
               }

               scrollTop = elem.scrollTop();
            });
         }
      };
   });
               </code></pre>
               <p>第一种方式有缺陷，因为有<code>-webkit-overflow-scrolling: touch;</code>的效果，手机上html页面会有回弹效果。当页面滑到页面最底部时会回弹，就会触发显示的代码，没有达到隐藏的效果，所以用以下方法。</p>
               <p>2.监听手指在屏幕滑动的距离</p>
               <pre><code>angular.module('myApp')
   .directive('scrollUpDown', function() {
      return {
         restrict: 'A',
         scope: false,
         link: function(scope, elem, attrs) {
            var startY, // 触摸时的坐标
               y, // 滑动的距离
               dom = elem.get(0);

            function touchSatrt(e) { // 触摸
               var touch = e.touches[0];
               startY = touch.pageY; //刚触摸时的坐标 
            }

            function touchMove(e) { // 滑动
               var touch = e.touches[0];
               y = touch.pageY - startY; //滑动的距离
               if(y &gt;= 15) {
                  elem.find('.title').removeClass('title-hide');
                  elem.find('.title').addClass('title-show');
               } else if(y &lt;= -15) {
                  elem.find('.title').addClass('title-hide');
                  elem.find('.title').removeClass('title-show');
               }
            }

            dom.addEventListener('touchstart', touchSatrt, false);
            dom.addEventListener('touchmove', touchMove, false);
         }
      };
   });
               </code></pre>
               <p>html代码</p>
               <pre><code>&lt;div class=&quot;outer&quot; scroll-up-down&gt;
   &lt;div class=&quot;title&quot;&gt;菜单&lt;/div&gt;
   &lt;div class=&quot;content&quot;&gt;页面内容&lt;/div&gt;
&lt;/div&gt;
               </code></pre>
               <p>css代码</p>
               <pre><code>.outer {
   height: 100%;
   width: 100%;
   background-color: white;
   color: #000000;
   font-size: 17px;
}

.outer .title {
   width: 100%;
   height: 60px;
   position: fixed;
   left: 0;
   top: 0;
   transition: top .5s;
}

.outer .content {
   width: 100%;
   height: 900px;
}

.title-hide {
   top: -65px;
}

.title-show {
   top: 0;
}
               </code></pre>
               <p>以上。</p>
               <hr>
               <section id="downloads" class="clearfix">
               <a href="../../index.html">返回首页</a>
               <a style="float:right;" href="https://github.com/tgwuyangyang" id="view-on-github" class="button">
                  <span>View on GitHub</span>
               </a>
            </section>
            </section>
            <hr>
            <div id="comment"></div>
            <footer>
               <table class="border-none">
                  <tr>
                     <td class="border-none">
                        This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
                     </td>
                  </tr>
               </table>
            </footer>
         </div>
      </div>
      <script src="../../js/jquery-2.1.4.min.js" type="text/javascript" charset="utf-8"></script>
      <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
      <script type="text/javascript">
         var gitment = new Gitment({
            owner: 'tgwuyangyang',
            repo: 'blog-data',
            oauth: {
               client_id: 'bdb7790eaaefb0d99fd1',
               client_secret: '228515d621788885f5e1f0fdae20a0da82bcfd9e',
            }
         })
   
         gitment.render("comment");
      </script>
   </body>
</html>
